<!-- Code Generated by Sidekick is for learning and experimentation purposes only. -->

<section class="py-3">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
          <a routerLink="/" class="text-decoration-none">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a routerLink="/shop" class="text-decoration-none">Shop</a>
        </li>
        <li class="breadcrumb-item" aria-current="page">
          {{ product?.name || 'Product Not Found' }}
        </li>
      </ol>
    </nav>
  </div>
</section>

<section class="py-5" *ngIf="product; else notFound">
  <div class="container">
    <div class="row">
      <div class="col-lg-6 d-flex gallery-wrapper gap-2">
        <!-- Thumbnails -->
        <div class="thumbnails-column me-3">
          <img
            *ngFor="let image of product.images; let i = index"
            [src]="image"
            [alt]="product.name + ' ' + (i + 1)"
            class="thumbnail-img"
            [class.active]="selectedImage === i"
            (click)="selectImage(i)"
            style="cursor:pointer; width:60px; margin-bottom:8px;"
          />
        </div>
        <!-- Main Image -->
        <div class="main-image-container flex-grow-1">
          <img
            [src]="product.images[selectedImage]"
            [alt]="product.name"
            style="max-width:350px; border-radius:12px;"
          />
        </div>
      </div>

      <!-- Product Info -->
      <div class="col-lg-6">
        <h1 class="script-font h2 mb-3">{{ product.name }}</h1>
        <!-- Rating -->
        <div class="d-flex align-items-center mb-3">
          <div class="me-2">
            <ng-container *ngFor="let star of [0,1,2,3,4]; let idx = index">
              <i class="fas fa-star" [ngClass]="idx < getFloor(product.rating) ? 'text-warning' : 'text-muted'"></i>
            </ng-container>
          </div>
          <span class="text-muted">({{ product.rating }})</span>
        </div>
        <!-- Price -->
        <div class="mb-3">
          <span *ngIf="product.originalPrice" class="original-price me-2">${{ product.originalPrice.toFixed(2) }}</span>
          <span class="product-price h4">${{ product.price.toFixed(2) }}</span>
        </div>
        <p class="text-muted mb-4">{{ product.description }}</p>
        <p class="mb-3"><strong>Availability:</strong> {{ product.stock }} in stock</p>
        <!-- Quantity Selector -->
        <div class="d-flex align-items-center mb-4">
          <label class="me-3"><strong>Quantity:</strong></label>
          <div class="d-flex align-items-center border rounded">
            <button class="btn btn-outline-secondary border-0" (click)="decrementQuantity()" [disabled]="quantity <= 1">-</button>
            <input
              type="number"
              class="form-control text-center border-0"
              [(ngModel)]="quantity"
              (change)="validateQuantity()"
              style="width:60px"
              min="1"
              [max]="product.stock"
            />
            <button class="btn btn-outline-secondary border-0" (click)="incrementQuantity()" [disabled]="quantity >= product.stock">+</button>
          </div>
        </div>
        <!-- Action Buttons -->
        <div class="d-flex gap-3 mb-4">
          <button class="btn btn-primary-custom" (click)="handleAddToCart()">ADD TO CART</button>
          <button class="btn btn-outline-danger"><i class="fas fa-heart"></i></button>
        </div>
        <p class="mb-3"><strong>Category:</strong> {{ product.category }}</p>
        <!-- Share -->
        <div class="d-flex align-items-center">
          <strong class="me-3">Share:</strong>
          <div class="social-icons">
            <a href="#"><i class="fab fa-facebook-f me-2"></i></a>
            <a href="#"><i class="fab fa-twitter me-2"></i></a>
            <a href="#"><i class="fab fa-pinterest me-2"></i></a>
            <a href="#"><i class="fab fa-google-plus-g me-2"></i></a>
            <a href="#"><i class="fas fa-envelope me-2"></i></a>
          </div>
        </div>
      </div>
    </div>

    <!-- Product Tabs -->
    <div class="row mt-5">
      <div class="col-12">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link" [ngClass]="activeTab === 'description' ? 'active' : ''" (click)="setActiveTab('description')">DESCRIPTION</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [ngClass]="activeTab === 'additional' ? 'active' : ''" (click)="setActiveTab('additional')">ADDITIONAL INFORMATION</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [ngClass]="activeTab === 'shipping' ? 'active' : ''" (click)="setActiveTab('shipping')">SHIPPING & RETURN</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" [ngClass]="activeTab === 'reviews' ? 'active' : ''" (click)="setActiveTab('reviews')">REVIEWS</button>
          </li>
        </ul>
        <div class="tab-content p-4 border border-top-0">
          <div *ngIf="activeTab === 'description'">
            <h4>Product Description</h4>
            <p class="text-muted">{{ product.description }}</p>
            <p class="text-muted">{{ product.additionalInfo }}</p>
            <ul class="text-muted">
              <li>Made with premium ingredients</li>
              <li>Fresh daily preparation</li>
              <li>Perfect for any occasion</li>
            </ul>
          </div>
          <div *ngIf="activeTab === 'additional'">
            <h4>Additional Information</h4>
            <p class="text-muted">{{ product.additionalInfo }}</p>
            <table class="table">
              <tbody>
                <tr><td><strong>Weight</strong></td><td>0.5 kg</td></tr>
                <tr><td><strong>Dimensions</strong></td><td>10 x 10 x 5 cm</td></tr>
                <tr><td><strong>Ingredients</strong></td><td>Flour, Sugar, Eggs, Butter, Vanilla</td></tr>
              </tbody>
            </table>
          </div>
          <div *ngIf="activeTab === 'shipping'">
            <h4>Shipping & Return Information</h4>
            <p class="text-muted">{{ product.shippingInfo }}</p>
            <ul class="text-muted">
              <li>Free shipping on orders over $50</li>
              <li>Standard delivery: 2-3 business days</li>
              <li>Express delivery: 1-2 business days</li>
              <li>30-day return policy</li>
            </ul>
          </div>
      <div *ngIf="activeTab === 'reviews'">
  <h4>Customer Reviews</h4>
  <div *ngIf="product.reviews && product.reviews.length > 0; else noReviews">
    <div *ngFor="let review of product.reviews" class="border-bottom pb-3 mb-3">
      <div class="d-flex align-items-center mb-2">
        <strong class="me-3">{{ review.name }}</strong>
        <div>
          <ng-container *ngFor="let star of [1,2,3,4,5]; let i = index">
            <i class="fas fa-star" [ngClass]="i < review.rating ? 'text-warning' : 'text-muted'"></i>
          </ng-container>
        </div>
      </div>
      <p class="text-muted">{{ review.comment }}</p>
    </div>
  </div>
  <ng-template #noReviews>
    <p class="text-muted">No reviews yet. Be the first to review this product!</p>
  </ng-template>
</div>

        </div>
      </div>
    </div>

    <!-- Related Products -->
    <div class="row mt-5">
      <div class="col-12">
        <h3 class="script-font h2 mb-4 text-center">RELATED PRODUCTS</h3>
        <div class="row">
          <ng-container *ngFor="let rp of relatedProducts">
            <div class="col-lg-3 col-md-6 mb-4">
              <div class="card product-card h-100">
                <img [src]="rp.mainImage" class="card-img-top product-image" [alt]="rp.name" />
                <div class="card-body text-center">
                  <h5 class="card-title product-title">{{ rp.name }}</h5>
                  <p class="card-text product-price">${{ rp.price.toFixed(2) }}</p>
                  <a [routerLink]="['/product', rp.id]" class="btn btn-outline-primary btn-sm">View Details</a>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</section>

<ng-template #notFound>
  <section>
    <div class="container py-5">
      <div class="text-center">
        <h2>Product not found</h2>
        <a routerLink="/shop" class="btn btn-primary">Back to Shop</a>
      </div>
    </div>
  </section>
</ng-template>

<!-- Newsletter section if available -->
<!-- <app-newsletter></app-newsletter> -->
